---
import BaseLayout from "../layouts/BaseLayout.astro";
---

<BaseLayout title="DoMore Mongolia">
  <main class="container mx-auto py-8 px-4">
    <!-- Hero Section with Slideshow -->
    <section
      class="relative min-h-[75vh] flex flex-col items-center justify-center text-white overflow-hidden rounded-3xl shadow-xl mt-4 mx-4 md:mx-auto"
    >
      <!-- Background Image Slideshow -->
      <div id="hero-slider-container" class="absolute inset-0 w-full h-full">
        <img
          id="hero-background-image"
          src="../image/hero-volunteer.jpg"
          alt="Volunteers working together"
          class="object-cover object-center w-full h-full transition-opacity duration-1000 ease-in-out"
          loading="eager"
        />
        <!-- Dark overlay for text readability -->
        <div class="absolute inset-0 bg-black opacity-50"></div>
      </div>

      <!-- Hero Content -->
      <div
        class="relative z-10 p-8 md:p-12 lg:p-16 text-center max-w-2xl mx-auto flex flex-col items-center justify-center"
      >
        <h1
          class="text-4xl md:text-5xl lg:text-6xl font-extrabold mb-4 leading-tight drop-shadow-md"
        >
          Илүү ихийг бүтээцгээе
        </h1>
        <p class="text-lg md:text-2xl mb-8 opacity-90 animate-pulse">
          Бидэнтэй нэгдэж нийгэмдээ эерэг өөрчлөлт авчрах мянга мянган залуусын нэг болоорой.
        </p>
        <a
          href="/events"
          class="bg-white text-blue-800 hover:bg-blue-50 font-bold py-3 px-8 rounded-full text-lg md:text-xl transition duration-300 ease-in-out transform hover:scale-105 shadow-lg"
        >
          Хөтөлбөр сонирхох
        </a>
        <a
          href="/opportunities"
          class="bg-white mt-5 text-blue-800 hover:bg-blue-50 font-bold py-3 px-8 rounded-full text-lg md:text-xl transition duration-300 ease-in-out transform hover:scale-105 shadow-lg"
        >
          Сайн дурын ажил сонирхох
        </a>
      </div>

      <!-- Hero Slider Navigation Buttons -->
      <button
        id="hero-prev-slide"
        class="absolute top-1/2 left-4 -translate-y-1/2 bg-white/30 hover:bg-white/50 text-white p-3 rounded-full shadow-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white z-20"
        aria-label="Previous hero image"
      >
        &#10094;
      </button>
      <button
        id="hero-next-slide"
        class="absolute top-1/2 right-4 -translate-y-1/2 bg-white/30 hover:bg-white/50 text-white p-3 rounded-full shadow-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white z-20"
        aria-label="Next hero image"
      >
        &#10095;
      </button>

      <!-- Hero Slider Pagination Dots -->
      <div id="hero-slider-dots" class="absolute bottom-8 flex justify-center space-x-2 z-20">
        <!-- Dots will be injected by JavaScript -->
      </div>
    </section>

    <!-- Join Us Section -->
    <section class="py-16 bg-gray-50 rounded-2xl shadow-inner mt-12 mx-4 md:mx-auto">
      <div class="container mx-auto px-4 text-center">
        <h2 class="text-3xl md:text-4xl font-bold mb-12 text-blue-900">
          Бидний нэг болох уу?
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 lg:gap-12">
          <div
            class="bg-white rounded-2xl shadow-lg p-8 flex flex-col items-center transition-transform duration-300 hover:-translate-y-2 hover:shadow-xl"
          >
            <img src="../image/hand.png" alt="hand icon" class="h-16 w-16 mb-4 text-blue-600" />
            <h3 class="text-2xl font-semibold mb-4 text-blue-700">
              Би би танай гишүүн болмоор байна.
            </h3>
            <p class="mb-6 text-gray-600 leading-relaxed">
              Бидэнтэй нэгдэж нийгэмдээ эерэг өөрчлөлт авчрах мянга мянган залуусын нэг нь болоорой.
            </p>
            <a
              href="/student"
              class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full text-lg transition duration-300 ease-in-out transform hover:scale-105 shadow-md"
            >
              Нэгдэх
            </a>
          </div>
          <div
            class="bg-white rounded-2xl shadow-lg p-8 flex flex-col items-center transition-transform duration-300 hover:-translate-y-2 hover:shadow-xl"
          >
            <img src="../image/company.png" alt="organization icon" class="h-16 w-16 mb-4 text-pink-600" />
            <h3 class="text-2xl font-semibold mb-4 text-pink-700">
              Бид хамтарч ажилламаар байна.
            </h3>
            <p class="mb-6 text-gray-600 leading-relaxed">
              Сайн дурын ажилтнуудтай холбогдож, таны үйл ажиллагааг дэмжих хүсэлтэй хүмүүсийг олоорой.
            </p>
            <a
              href="/organization"
              class="inline-block bg-pink-600 hover:bg-pink-500 text-white font-bold py-3 px-8 rounded-full text-lg transition duration-300 ease-in-out transform hover:scale-105 shadow-md"
            >
              Нэгдэх
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Testimonials Section -->
    <section class="py-16 bg-gray-50 text-gray-800 mt-12 mx-4 md:mx-auto rounded-2xl shadow-inner">
      <div class="container mx-auto px-4 text-center">
        <h2 class="text-3xl md:text-4xl font-bold mb-10">
          Тэдний түүх
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 lg:gap-12">
          <div
            class="p-8 bg-white rounded-xl shadow-lg border-l-4 border-blue-600 flex flex-col justify-between transform transition duration-300 hover:-translate-y-1 hover:shadow-xl"
          >
            <p class="text-lg italic mb-6 text-gray-700">
              "Volunteering with DoMore Mongolia has been incredibly rewarding.
              I've met amazing people and seen the direct impact of our work on
              the community. It's truly inspiring!"
            </p>
            <p class="font-semibold text-blue-800 text-right">
              - Khulan, Environmental Cleanup Volunteer
            </p>
          </div>
          <div
            class="p-8 bg-white rounded-xl shadow-lg border-l-4 border-pink-600 flex flex-col justify-between transform transition duration-300 hover:-translate-y-1 hover:shadow-xl"
          >
            <p class="text-lg italic mb-6 text-gray-700">
              "I never thought I could make such a difference. Teaching children
              has given me a new sense of purpose and joy. The support from
              DoMore Mongolia is fantastic. Highly recommend!"
            </p>
            <p class="font-semibold text-pink-800 text-right">
              - Batbayar, Education Support Volunteer
            </p>
          </div>
        </div>
        <a
          href="/stories"
          class="mt-12 inline-block bg-blue-900 hover:bg-pink-500 text-white font-bold py-3 px-8 rounded-full text-lg transition duration-300 ease-in-out transform hover:scale-105 shadow-md"
        >
          Цааш унших
        </a>
      </div>
    </section>

    <section>
      <h2 class="text-3xl font-bold mb-8 text-gray-900 text-center">Хамтрагч байгууллагууд</h2>
      <div>
        <div class="grid grid-cols-2 md:grid-cols-5 gap-6">
          <img src="../image/company.png" alt="Partner 1" class="h-16 w-auto object-contain mx-auto my-8" />
          <img src="../image/company1.png" alt="Partner 2" class="h-16 w-auto object-contain mx-auto my-8" />
          <img src="../image/company2.png" alt="Partner 3" class="h-16 w-auto object-contain mx-auto my-8" />
          <img src="../image/company3.png" alt="Partner 4" class="h-16 w-auto object-contain mx-auto my-8" />
          <img src="../image/company4.png" alt="Partner 4" class="h-16 w-auto object-contain mx-auto my-8" />
          <img src="../image/company5.png" alt="Partner 4" class="h-16 w-auto object-contain mx-auto my-8" />
          <img src="../image/company6.png" alt="Partner 4" class="h-16 w-auto object-contain mx-auto my-8" />
          <img src="../image/company7.png" alt="Partner 4" class="h-16 w-auto object-contain mx-auto my-8" />
          <img src="../image/company8.png" alt="Partner 4" class="h-16 w-auto object-contain mx-auto my-8" />
          <img src="../image/company9.png" alt="Partner 4" class="h-16 w-auto object-contain mx-auto my-8" />
        </div>
        <p class="text-center text-gray-600 mt-4 sm:p-9">
          Бидэнтэй хамтран ажиллахыг хүсвэл <a href="/sign-up" class="text-blue-600 hover:underline">нэгдэх товч</a> дээр дарна уу.
        </p>
      </div>
    </section>
  </main>
</BaseLayout>

<script>
  // Hero Section Slideshow Logic
  const heroImages = [
    "../image/hero-volunteer.jpg",
    "../image/volunteer.jpg", // Placeholder for second image
    "../image/vo.jpg"  // Placeholder for third image
  ];
  const heroImageElement = document.getElementById('hero-background-image');
  const heroPrevButton = document.getElementById('hero-prev-slide');
  const heroNextButton = document.getElementById('hero-next-slide');
  const heroSliderDotsContainer = document.getElementById('hero-slider-dots');

  let currentHeroIndex = 0;
  let heroInterval;

  // Function to update the hero background image with a fade effect
  function updateHeroImage() {
    heroImageElement.style.opacity = '0'; // Start fade out
    setTimeout(() => {
      heroImageElement.src = heroImages[currentHeroIndex];
      heroImageElement.style.opacity = '1'; // Fade in
    }, 500); // Half of transition duration for smooth fade

    updateHeroDots();
  }

  // Navigate to the next hero slide
  function nextHeroSlide() {
    currentHeroIndex = (currentHeroIndex + 1) % heroImages.length;
    updateHeroImage();
    resetHeroInterval(); // Reset interval on manual interaction
  }

  // Navigate to the previous hero slide
  function prevHeroSlide() {
    currentHeroIndex = (currentHeroIndex - 1 + heroImages.length) % heroImages.length;
    updateHeroImage();
    resetHeroInterval(); // Reset interval on manual interaction
  }

  // Render pagination dots for the hero slider
  function renderHeroDots() {
    heroSliderDotsContainer.innerHTML = '';
    heroImages.forEach((_, index) => {
      const dot = document.createElement('button');
      dot.className = `w-3 h-3 rounded-full bg-white/50 hover:bg-white transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-white`;
      dot.addEventListener('click', () => {
        currentHeroIndex = index;
        updateHeroImage();
        resetHeroInterval(); // Reset interval on manual interaction
      });
      heroSliderDotsContainer.appendChild(dot);
    });
    updateHeroDots();
  }

  // Update the active state of hero pagination dots
  function updateHeroDots() {
    Array.from(heroSliderDotsContainer.children).forEach((dot, index) => {
      if (index === currentHeroIndex) {
        dot.classList.add('bg-white');
        dot.classList.remove('bg-white/50');
      } else {
        dot.classList.remove('bg-white');
        dot.classList.add('bg-white/50');
      }
    });
  }

  // Start automatic hero slide transition
  function startHeroInterval() {
    heroInterval = setInterval(nextHeroSlide, 5000); // Change slide every 5 seconds
  }

  // Reset the automatic interval (e.g., after manual navigation)
  function resetHeroInterval() {
    clearInterval(heroInterval);
    startHeroInterval();
  }

  // Event Listeners for hero slider navigation
  heroPrevButton.addEventListener('click', prevHeroSlide);
  heroNextButton.addEventListener('click', nextHeroSlide);

  // Initial setup for the hero slider when the DOM is ready
  document.addEventListener('DOMContentLoaded', () => {
    updateHeroImage();
    renderHeroDots();
    startHeroInterval();
  });
</script>
